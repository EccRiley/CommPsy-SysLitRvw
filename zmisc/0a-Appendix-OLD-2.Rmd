---
title: "MAP - Appendices"
author: "Rachel M. Smith"
date: "`r format(Sys.Date(), '%d %B %Y')`"
fignos-plus-name: "Figure "
tablenos-plus-name: "Table "
---
\Frule

\newpage

<!-- doublespacing -->

# Appendix A: Referenced Tables & Figures

```{r setup, echo=FALSE, results='hide', message=FALSE, warning=FALSE, cache=FALSE, fig.show='none', fig.keep='none'}
source("bibs.R")
knitr::opts_chunk$set(echo = FALSE, results = 'asis')
```

See {+@tbl:jsft} & {+@tbl:mapJrnl}

```{r ft_journal_scat}
Rtdf(MAP$journal, names = c("Publication Title", "$N_{Articles}$")) %>%
    kable(caption = "Publication Titles of Reviewed Articles {#tbl:mapJrnl}")

MAPp <- MAP[, c("journal", "scat")] %>% dplyr::rename("Publication Title" = journal, "Research Category" = scat)

MAPp[, 2] <- factor(MAPp[, 2],
                    labels = c("IPV Interventions Research",
                               "SMW-Inclusive IPV Research"))

jsft <- ftable(MAPp) %>% as.matrix()
jsft <- ifelse(jsft == 0, NA, jsft)
kable(jsft, caption = "Number of Articles per Publication Title in Each Research Category {#tbl:jsft}", align = c("l", "c", "c"))

```

\newpage

```{r dbsrchkable}
## BELOW IS FOR .TEX/.PDF OUTPUT ##
dbsrch$srch <- paste0("\\footnotesize{\\textit{", dbsrch$srch, "}}")
dbsrch$n <- paste0("\\footnotesize{\\textit{", dbsrch$n, "}}")
dbsrch$nres <- paste0("\\footnotesize{\\textit{", dbsrch$nres, "}}")

## BELOW IS FOR .DOCX OUTPUT ##
# dbsrch$srch <- paste0("_", dbsrch$srch, "_")
# dbsrch$n <- paste0("_", dbsrch$n, "_")
# dbsrch$nres <- paste0("_", dbsrch$nres, "_")
# names(dbsrch) <- c("", "Database Search", "$Range_{N_{Results}}$")

kable(dbsrch, caption = "Descriptions of database searches conducted with corresponding ranges of the number of results returned {#tbl:dbsrch}", align = c("r", "l", "c"))
```


\newpage

# Appendix B: Qualitative Comparative Analysis Results

The tables and figures provided in this appendix represent the qualitative comparative analytic process and corresponding findings for the present review.


`r Rcite_r(file = "../auxDocs/REFs.bib", footnote = FALSE, Rnote = "This process was conducted using")`

Detailed source code for this process is publicly available in a GitHub repository owned and maintained by the author, which can be found at the following web address: \url{https://github.com/EccRiley/CommPsy-SysLitRvw}.

\Frule

\newpage

```{r setup_bibs, echo=FALSE, results='hide', message=FALSE, warning=FALSE, cache=FALSE}
# SETUP --------------------------------------------------------------

source("../SETUP.R")
knitr::opts_chunk$set(
    tidy = TRUE,
    echo = FALSE,
    fig.keep = 'high',
    fig.show = 'asis',
    results = 'asis',
    tidy.opts = list(comment = FALSE),
    echoRule = NULL,
    echoRuleb = NULL,
    fig.height = 5,
    fig.path = "graphics/bibs/rplot-")#, dev = 'png',
    # fig.retina = 4
# rpm()
```

# Community Psychology Publications & Closely-Related Violence-Specific Publications


```{r journals}
# JOURNALS -----------------------------------------------------------


### FUN - 'Rabbr()' ####
Rabbr <- function(x) {
    s0 <- strsplit(x, " ")[[1]]
    ex <- c("a", "the", "to", "at", "in", "with", "and", "but", "or", "of", "\\&")
    s1 <- s0[!s0 %in% ex]
    s2 <- substring(s1, 1,1)
    s <- paste(s2, sep = "", collapse = "")
    s <- toupper(s)
    return(s)
}

j.all <- c("Action Research",
             "American Journal of Community Psychology",
             "American Journal of Health Promotion",
             "American Journal of Orthopsychiatry",
             "American Journal of Preventive Medicine",
             "American Journal of Public Health",
             "Australian Community Psychologist",
             "Community Development",
             "Community Development Journal",
             "Community Mental Health Journal",
             "Community Psychology in Global Perspective",
             "Cultural Diversity and Ethnic Minority Psychology",
             "Global Journal of Community Psychology Practice",
             "Health Education and Behavior",
             "Health Promotion Practice",
             "Journal of Applied Social Psychology",
             "Journal of Community and Applied Social Psychology",
             "Journal of Community Practice",
             "Journal of Health and Social Behavior",
             "Journal of Prevention and Intervention",
             "Journal of Primary Prevention",
             "Journal of Rural Community Psychology",
             "Journal of Social Issues",
             "Journal of Community Psychology",
             "Psychiatric Rehabilitation Journal",
             "Psychology of Women Quarterly",
             "Psychosocial Intervention",
             "Social Science and Medicine",
             "The Community Psychologist",
             "Transcultural Psychiatry",
             "Progress in Community Health Partnerships: Research, Education, and Action",
             "Journal of Interpersonal Violence",
             "Violence Against Women",
             "Violence and Victims",
             "Journal of Family Violence")
```



```{r tidy=TRUE, echoRule=NULL, Rrule=NULL, Rerule=TRUE}

j.loc <- c("UK", "US", "US", "US", "US", "US", "AU", "UK", "UK", "NL", "IT", "US", "US", "US", "US", "UK", "UK", "US", "US", "US", "US", "US", "UK", "US", "US", "UK", "ES", "UK", "US", "UK", "US", "US", "US", "US", "US")

j.year <- c(2003, 1973, 1986, 1930, 1985, 1971, 2006, 2005, 1966, 1965, 2015, 1995, 2010, 1997, 2000, 1971, 1991, 1994, 1967, 1996, 1981, 1980, 1997, 1973, 1996, 1976, 2011, 1967, 1975, 1997, 2007, 1986, 1995, 1986, 1986)

SJR <- c(0.33, 1.237, 0.821, 0.756, 2.764, 2.52, NA, NA, 0.47, 0.467, NA, NA, NA, 1.177, 0.769, 0.639, 0.855, 0.278, 1.727, 0.231, 0.64, NA, 1.467, 0.425, 0.692, 1.216, 0.331, 1.894, NA, 1.141, 0.427, 1.064, 0.851, 0.449, 0.639) ## SJR is for 2015 (most recent available on http://www.scimagojr.com) ##

Hindex <- c(15, 83, 72, 69, 154, 196, NA, NA, 28, 51, NA, NA, NA, 72, 32, 78, 44, 15, 93, 21, 36, NA, 89, 65, 48, 66, 8, 177, NA, 35, 15, 78, 66, 64, 56) ## also retrieved from http://www.scimagojr.com ##

jdat <- data.frame(j.all, j.loc, j.year, SJR, Hindex)

jdat$jrnl <- sapply(as.character(jdat$j.all), Rabbr)

jdat.v <- read.csv("data/ipvJournalsSearch.csv")[c(-1, -6, -7), ]
    ## Exclude Theses and Dissertations ##

m.cnt <- mean(jdat.v[, 2])

jdat.v$j <- as.integer(jdat.v$journal)

jdat.v$jrnl <- sapply(as.character(jdat.v$journal), Rabbr)

jv.sum <- sum(jdat.v$count)

jdat.v$prop <- jdat.v$count/jv.sum

jdat <- merge(jdat.v, jdat)[, c("jrnl", "count", "prop", "j.loc", "j.year", "SJR", "Hindex")]


jfv.n <- jdat.v[jdat.v$j == 59, 2]
jiv.n <- jdat.v[jdat.v$j == 61, 2]
vaw.n <- jdat.v[jdat.v$j == 94, 2]
jvv.n <- jdat.v[jdat.v$j == 96, 2]
jv.n <- rbind(jiv.n, jfv.n, vaw.n, jvv.n)

jdat.v.m <- jdat.v[jdat.v[,2] >= m.cnt, ]

j.vpr <-c("Journal of Interpersonal Violence",
         "Violence Against Women",
         "Violence and Victims",
         "Journal of Family Violence")

j.v <- sapply(j.vpr, tolower, USE.NAMES = FALSE)

j.cppr <- c("Action Research",
            "American Journal of Community Psychology",
            "American Journal of Health Promotion",
            "American Journal of Orthopsychiatry",
            "American Journal of Preventive Medicine",
            "American Journal of Public Health",
            "Australian Community Psychologist",
            "Community Development",
            "Community Development Journal",
            "Community Mental Health Journal",
            "Community Psychology in Global Perspective",
            "Cultural Diversity and Ethnic Minority Psychology",
            "Global Journal of Community Psychology Practice",
            "Health Education and Behavior",
            "Health Promotion Practice",
            "Journal of Applied Social Psychology",
            "Journal of Community and Applied Social Psychology",
            "Journal of Community Practice",
            "Journal of Community Psychology",
            "Journal of Health and Social Behavior",
            "Journal of Prevention and Intervention",
            "Journal of Primary Prevention",
            "Journal of Rural Community Psychology",
            "Journal of Social Issues",
            "Journal of Community Psychology",
            "Psychiatric Rehabilitation Journal",
            "Psychology of Women Quarterly",
            "Social Science and Medicine",
            "The Community Psychologist",
            "Transcultural Psychiatry",
            "Progress in Community Health Partnerships")

j.cp <- sapply(j.cppr, tolower, USE.NAMES = FALSE)
```




```{r pander_journals, echo=FALSE}

### FUN - 'RtCap()' ####
RtCap <- function(x) {
    s0 <- strsplit(x, " ")[[1]]
    nocap <- c("a", "the", "to", "at", "in", "with", "and", "but", "or", "of")
    s1 <- ifelse(!s0 %in% nocap, toupper(substring(s0, 1,1)), s0)
    # s2 <- toupper(substring(s[!s %in% nocap], 1,1))
    s2 <- ifelse(!s0 %in% nocap, substring(s0, 2), "")
    s <- paste(s1, s2, sep="", collapse=" ")
    return(s)
}

j.cpp <- sapply(j.cp, RtCap, USE.NAMES = FALSE)
cat(tufte::newthought("Community-psychology journals"), "included in database searches:\n\n")
j.cpp %>% as.list() %>% pander()
```


\newpage


```{r }
jdat.v.m <- dplyr::rename(jdat.v.m, "Journal" = journal, "Count" = count)
rownames(jdat.v.m) <- NULL
kable(jdat.v.m[, 1:2], align = c("l", "r"), caption = "Violence-specific journals with article counts greater than or equal to the mean of all journal article counts in the 'broad-strokes' database search results set.")

j.vp <- sapply(j.v, RtCap, USE.NAMES = FALSE)
cat(tufte::newthought("Violence-specific journals"), " selected for inclusion in database searches.")
j.vp %>% as.list() %>% pander()
```


\newpage

# Results of Systematic Database Searches:


```{r bibdf}
### FUN - 'Rbibkeys()' ####
Rbibkeys <- function(bib) {
    keys <- bib[grep("\\@.*?\\{.*?,", bib, perl = TRUE)]
    keys <- gsub("\\@\\w+\\{(.*?)", "\\1", keys, perl = TRUE)
    keys <- keys[!grepl("\\%.*?,", keys, perl = TRUE)]
    keys <- gsub(" ", NA_character_, keys)
    keys <- gsub(",", "", keys)
    return(keys)
}

# BIB --------------------------------------------------------------

bib <- readLines("MAP.bib")
BIBKEY <- Rbibkeys(bib)

library(bib2df)
bibdf <- bib2df("MAP.bib")

### n.init ####
n.init <- nrow(bibdf)

ID <- seq(1:nrow(bibdf))
MAP.au <- cbind(BIBKEY, bibdf[, "AUTHOR"])
    ## bibdf[,2] ##
```



```{r MAP}
# MAP ----------------------------------------------------------------
MAP <- cbind(ID,
             BIBKEY,
             bibdf[, c("YEAR", "TITLE", "JOURNAL", "ABSTRACT")]) %>%
    as.data.frame()
    ## bibdf[c(3:5, 8)] ##
names(MAP)[-1] <- tolower(names(MAP)[-1])
```



```{r MAP_RQDA, results='hide', fig.keep='none', fig.show='none'}
# MAP-RQDA ----------------------------------------------------------------
source("MAPrqda.R", echo = FALSE)
```



```{r }
csid <- caseids[, c("caseid", "case", "RM", "scat")]
    ## caseids[, -3] ##
csid$case <- factor(csid$case)

MAP <- merge(MAP, csid, by.x = "bibkey", by.y = "case")
#
# Rtdf(MAP$journal, names = c("Journal", "$N_{Articles}$")) %>%
#     kable(caption = "Number of articles published in each included journal after restricting search results to only those published in community-psychology specific journals and the _four selected_ violence-related journals")

### n.inits3 & n.inits4 ####
n.inits3 <- MAP[MAP$scat == "S3", ] %>% nrow()
n.inits4 <- MAP[MAP$scat == "S4", ] %>% nrow()
MAPv1 <- as.character(MAP$bibkey)

ctbl.z1 <- merge(ctbl.z1, cbk, all.x = TRUE, all.y = FALSE)
ctbl.z1$clab <- factor(ctbl.z1$clab) %>% droplevels()
t.excl <- Rtdf(ctbl.z1$clab, names = c("Reason for Exclusion", "$N_{excluded~articles}$"))

v1v2 <- paste0("@", as.character(ctbl.z1[, "case"]))

cat(tufte::newthought(paste0("$N = ", length(v1v2), "$ Items excluded from the final list of formally evaluated studies")), "after restricting results to only _U.S.-based empirical_ studies:\n\n")
v1v2 %>% sort() %>% as.list() %>% pander()

t.excl %>% kable(caption = "Number of Articles Removed per Exclusion Criteria", align = c('l', 'r')) #%>% #, format = 'latex', booktabs = TRUE) #%>%
    # add_footnote("The inclusion of SMW criterion was only applied to articles returned from the database searches specific to SMW-Inclusive research.")
```



```{r }
# MAPv2 <- MAP[!MAPv1 %in% ctbl.z1[, "case"], "bibkey"] %>% as.character()

# MAPv2 <- c("rumptz1991ecological", "gondolf1999comparison", "thompson2000identification", "gregory2002effects", "sullivan2002findings", "foshee2004assessing", "hendricks2006recidivism", "hovell2006evaluation", "silvergleid2006batterer", "contrino2007compliance", "muftic2007evaluation", "gillum2008benefits", "roffman2008mens", "price2009batterer", "enriquez2010development", "welland2010culturally", "feder2011need", "portwood2011evaluation", "potter2011bringing", "boal2014barriers", "boal2014impact", "ermentrout2014this", "howell2015strengthening", "lockhart1994letting", "wise1997comparison", "bernhard2000physical", "giorgio2002speaking", "younglove2002law", "fortunata2003demographic", "mccloskey2003contribution", "glass2004female-perpetrated", "balsam2005relationship", "sorenson2005restraining", "heintz2006intimate", "pattavina2007comparison", "bossarte2008clustering", "glass2008risk", "hassouneh2008influence", "swahn2008measuring", "blosnich2009comparisons", "edelen2009measurement", "oswald2010lesbian", "ackerman2011gender", "davidovic2011impelling", "hardesty2011lesbian/bisexual", "iverson2011contribution", "messinger2011invisible", "porter2011intimate", "gillum2012there", "goldberg2013sexual", "kanuha2013relationships", "witte2013social", "finneran2014antecedents", "lewis2014sexual", "mustanski2014syndemic", "tran2014prevalence", "edwards2015physical", "kubicek2015same-sex", "lewis2015emotional", "sylaska2015disclosure", "witte2015perceived", "wu2015association", "dixon2016association", "edwards2016college", "langenderfer-magruder2016experiences")

# v1v2 <- MAPv1[!MAPv1 %in% MAPv2]
# v1v2 <- paste0("@", v1v2)
#
#
```




```{r MAP_CPV}

# MAP-CPV ----------------------------------------------------------------

## (map.cp & map.v) ============================================================
j.vcap <- sapply(j.v, RtCap)

MAP$journal <- sapply(MAP$journal, tolower)
MAP$journal <- gsub(" & ", " and ", MAP$journal)
# MAP$journal <- factor(MAP$journal)

cp <- MAP$journal %in% j.cp
map.cp <- MAP[cp, ] %>% data.frame()

levels(map.cp$journal) <- c(levels(map.cp$journal),
                            j.cp[!j.cp %in% levels(map.cp$journal)])
levels(map.cp$journal) <- sapply(levels(map.cp$journal), RtCap)

vlc <- MAP$journal %in% j.v
map.v <- MAP[vlc, ] %>% data.frame()
map.v$RM <- ifelse(map.v$RM == 1, NA, 0)
map.v <- na.omit(map.v)

MAPv2 <- as.character(map.v$bibkey)
v1v2 <- MAP[!MAP$bibkey %in% MAPv2, "bibkey"]
cat(tufte::newthought(paste0("$N = ", length(v1v2), "$ items excluded after restricting search results")), " to only those published in community-psychology specific journals and the _four selected_ violence-related journals (i.e., ", paste0("_", j.vcap[1:(length(j.vcap)-1)], "_, "), "and ", paste0("_", j.vcap[length(j.vcap)], "_):\n\n"))
v1v2 %>% as.list() %>% pander()


map.v <- map.v[map.v$scat == "S3", , drop = FALSE]
# map.v$journal <- droplevels(map.v$journal)
map.v$journal <- sapply(map.v$journal, RtCap)

j.cpv <- c(j.v, j.cp)
cpv <- MAP$journal %in% j.cpv

map.cpv <- MAP[cpv, ] %>% data.frame()

map.cpv$rms4 <- ifelse(map.cpv$journal %in% j.v & map.cpv$scat == "S4", NA, map.cpv$scat)
map.cpv <- na.omit(map.cpv)

MAP <- merge(map.cp, map.v, all = TRUE)


# MAP(v3) - FINAL --------------------------------------------------------

MAPv3 <- as.character(MAP$bibkey)

v2v3 <- MAPv2[!MAPv2 %in% MAPv3]
v2v3 <- paste0("@", v2v3)
```


\newpage


```{r }
cat(tufte::newthought(paste0("$N = ", length(v2v3), "$ Items excluded after restricting ")), "(1) IPV interventions research to only those published in one of the community-psychology specific journals or one of the _four selected_ violence-related journals (i.e., ", paste0("_", j.vcap[1:(length(j.vcap)-1)], "_, "), "and ", paste0("_", j.vcap[length(j.vcap)], "_),  and (2) SMW-specific search results to only include items published in community-psychology specific journals:\n\n"))
v2v3 %>% as.list() %>% pander()

MAP$RM <- ifelse(MAP$RM == 1, NA, 0)
MAPrm <- MAP[is.na(MAP$RM), "bibkey"] %>% droplevels() %>% as.character()
MAP <- na.omit(MAP)
MAP <- droplevels(MAP)

# EXCL <- ctbl.z1[ctbl.z1$case %in% MAPrm, c("case", "scat", "code")]
```


<!-- ## Final Inclusion \\& Exclusion Decisions-->

<!-- Any articles retained from the above-described database searches and filtering processes that either did not meet the basic inclusion criteria (i.e., U.S.-based empirical research) or were determined to be unrelated to the topics of interest for the current review were excluded from the set of formally reviewed articles ($N_{excluded} = `r length(MAPrm)`$). The final set of `r paste0("$N_{included} = ", nrow(MAP), "$")` is divided into two categories: (C1) IPV intervention evaluations research (`r paste0("$n_{c_{1}} = ", nrow(MAP[MAP$scat == "S3", ]), "$")`), and (C2) community-psychology-specific research specific to SMW-Inclusive and inclusive of sexual minority women (`r paste0("$n_{c_{2}} = ", nrow(MAP[MAP$scat == "S4", ]), "$")`). -->


```{r }
# ctbl.z1 <- ctbl.z1[ctbl.z1$case %in% MAPrm, ]
#
# library(kableExtra)
#
# MAPv31 <- as.character(MAP$bibkey)
# v3v31 <- MAPv3[!MAPv3 %in% MAPv31]
# v3v31 <- paste0("@", v3v31)
```




```{r }
## map-jrnl ============================================================
MAP$journal <- factor(MAP$journal)
levels(MAP$journal) <- sapply(levels(MAP$journal), RtCap)
MAP$journal <- droplevels(MAP$journal)

MAP$jrnl <- sapply(as.character(MAP$journal), Rabbr)

MAP <- merge(MAP, jdat, by = "jrnl", all.x = TRUE)
```


\newpage

# \LARGE{\textsc{Systematically-Reviewed Literature}}

\Frule

`r tufte::newthought("The resulting selection of empirical literature")`, representing a community-psychology-focused subset of the U.S.-based IPV-related literature, was reviewed using a `primarily deductive` _qualitative comparative analytic approach_ [_QCA_; @leech2007array; @onwuegbuzie2017framework]. This approach was conducted as part of an initial data reduction and organization process in which the reviewed literature was categorized according to the commonalities in overarching research topics, target populations, sampling frames, sampling and data collection methodologies, and data analytic approaches. In addition, the QCA approach served as a systematic method for examining the similarities, differences, and anomalies within the groups identified in the initial data reduction and organization process [@onwuegbuzie2017framework; @onwuegbuzie2009qualitative]. The qualitative comparative analysis of the reviewed literature was aided by the _`RQDA`_ package created for use with the _`R` Statistical Programming Language and Environment_ [@R-RQDA; @R-base].


```{r cb}

# CTBL ---------------------------------------------------------------

cb <- merge(MAP, ctbl, by = c("caseid", "scat"))
cb <- within(cb, {
    journal <- droplevels(journal)
    jrnl <- sapply(as.character(journal), Rabbr)
    code <- gsub("FG-\\w+", "FG", code)
    # code <- gsub("EXP-\\w+", "EXP", code)
    # code <- gsub("LT-\\w+", "LT", code)
    code <- gsub("SVY-QL-MM", "SVY-QL", code)
    code <- gsub("SVY-QT-MM", "SVY-QT", code)
    # code <- gsub("XS-\\w+", "XS", code)
    code <- gsub("IVW-\\w+", "IVW", code)
    code <- gsub("SMIN-\\w+", NA, code)
    code <- gsub("HET", NA, code)
    scat <- factor(scat, labels = c("IPV Interventions", "SMW-Inclusive Research"))
})
cb <- na.omit(cb) %>% droplevels()

# cbk$clab <- ifelse(cbk$code %in% cb$code, cbk$clab, NA)
# cbk <- na.omit(cbk) %>% droplevels()

cb <- merge(cb, cbk, by = "code")
cb$code <- factor(cb$code)
cb$clab <- factor(cb$clab)
```


\newpage

# General Research Categories
\Frule


```{r desc}
### catpal ####

catpal <- c(adjustcolor(pal_my[16], alpha.f = 0.9), adjustcolor(pal_my[5], alpha.f = 0.9))

# DESCRIPTIVES ---------------------------------------------------------------

## search categories ============================================================

### [MAP-abstracts-S3.csv] ####
cpv.s3 <- MAP[MAP$scat == "S3", ]; ## write.csv(cpv.s3[order(cpv.s3$year), c("bibkey", "year", "title", "journal", "abstract")], "data/MAP-abstracts-S3.csv", row.names = FALSE)

### [MAP-abstracts-S4.csv] ####
cpv.s4 <- MAP[MAP$scat == "S4", ]; ## write.csv(cpv.s4[order(cpv.s4$year), c("bibkey", "year", "title", "journal", "abstract")], "data/MAP-abstracts-S4.csv", row.names = FALSE)

ct.scat <- within(MAP, {
    scat <- ifelse(scat == "S3", "IPV Interventions", "SMW-Inclusive Research")
})

t.scat <- Rtdf(ct.scat$scat, names = c("Category", "N"))
    ## "ct.scat" created in "MAPrqda.R" ##
t.scat %>% kable()
scat.t <- table(ct.scat$scat)
scat.bn <- Rbinom(scat.t)
scat.bn %>% pander(caption = "Binomial Test of the Difference in Search Category Proportions")

t.scat$prop = t.scat$N / sum(t.scat$N)
t.scat <- t.scat[order(t.scat$prop), ]
t.scat$ymax <- cumsum(t.scat$prop)
t.scat$ymin <- c(0, head(t.scat$ymax, n = -1))

### PLOT - scat ####
library(ggplot2)
scat.p <- ggplot(t.scat, aes(fill = Category,
                             ymax = ymax,
                             ymin = ymin,
                             xmax = 4,
                             xmin = 3)) +
    scale_fill_manual(values = catpal) +
    geom_rect() +
    coord_polar(theta = "y") +
    xlim(c(0, 4)) +
    annotate("text", x = 0, y = 0, label = "Category Proportions") +
    labs(title = "") +
    thm_Rtft(ytitle = FALSE) +
    theme(axis.text = element_blank(),
          axis.ticks = element_blank(),
          legend.text = element_text(size = rel(1)),
          legend.key.width = unit(0.5, "cm"),
          legend.key.height = unit(0.5, "cm"))
scat.p
```



\newpage

# Publication Titles
\Frule


```{r pub_titles}
## publication titles ============================================================
t.jrnl <- Rtdf(MAP$journal)
ft.jrnl <- with(MAP, {
    ftable(journal, scat) %>%
        matrix(nrow = nrow(t.jrnl),
               byrow = FALSE)
})
dimnames(ft.jrnl) <- list("Publication Title" = levels(MAP$journal),
                          Category = c("IPV Interventions", "SMW-Inclusive Research"))
ft.jrnl <- ifelse(ft.jrnl == 0, NA, ft.jrnl)
ft.jrnl %>% pander(caption = "Number of Publications in Each Research Category per Journal",
                   justify = c("left", "right", "right"))

cpv.s3$jrnl <- sapply(as.character(cpv.s3$journal), Rabbr) %>% factor()
cpv.s4$jrnl <- sapply(as.character(cpv.s4$journal), Rabbr) %>% factor()
j.cp <- sapply(j.cp, Rabbr, USE.NAMES = FALSE)
cb$cpv <- ifelse(cb$jrnl %in% j.cp, "CP", "V")

j.v <- sapply(j.v, Rabbr, USE.NAMES = FALSE)
pr.jv <- length(j.v)/length(j.cp)
pr.jcp <- 1 - pr.jv
pr.j <- c(pr.jv, pr.jcp)
MAP$cpv <- ifelse(MAP$jrnl %in% j.cp, "CP", "V")

# cpv.bn1 <- table(MAP$cpv) %>% Rbinom()
    ### H1: unequal proportions (H0: pi_0 = 0.5) ##
# cpv.bn2 <- table(MAP$cpv) %>% rev() %>% Rbinom(pi0 = pr.jv)
    ## H1: V is less than CP (based on N_{journals}
        ## per V & CP included in db searches;
    ### H0: pi_0 = 0.129) ##

# cpv.bn1 %>% pander(caption = "Binomial Test of $N_{articles}$ per Journal Category (Violence vs. Community Psychology ($\\pi_{0} = 0.5$).")
# cpv.bn2 %>% pander(caption = paste0("Binomial Test of $N_{articles}$ per Journal Category (Violence vs. Community Psychology [$\\pi_{0} = ", round(pr.jv, 3), "$ (based on proportion of $N_{journals}$ per journal category included in database searches; $n_{journals_{V}} = ", length(j.v), "$; $n_{journals_{CP}} = ", length(j.cp), "$)]."))
```

## Research Category by Journal & Journal Category


```{r scat_x_journal}
ftm.j <- Rna(ft.jrnl)
sum.j <- apply(ftm.j, 1, sum)
ftm.jp <- cbind(ft.jrnl, "**Total**" = sum.j)
ftm.jp %>% pander(justify = c("left", "right", "right", "right"),
                  caption = "$N_{articles}$ in Each Research Category per Journal")

Rdotchart(
    ftm.j,
    pch = 19,
    gcolor = pal_my[20],
    xlab = expression(N[Articles]),
    cex = 0.7,
    gcex = 0.75,
    gfont = 2,
    pt.cex = 1.125,
    color = c(rep(catpal[1], nrow(ftm.j)), rep(catpal[2], nrow(ftm.j))),
    xaxt = 'n'
); axis(1, at = seq(range(ftm.j, na.rm = TRUE)[1],
                    range(ftm.j, na.rm = TRUE)[2], by = 3))

MAP.j <- MAP[, c("scat", "journal")]
names(MAP.j) <- c("Category", "Journal")
MAP.j$Category <- ifelse(MAP.j$Category == "S3",
                         "IPV Interventions",
                         "SMW-Inclusive Research")
pj <- mpal(1:length(unique(MAP$jrnl)), p = sci)
library(ggparallel)
pscat <- c("#a6afbb", pal_my[17])

j.ps <- ggparset2(list("Category", "Journal"),
                  data = MAP.j,
                  method = "parset", label = TRUE,
                  label.size = 2.75, text.angle = 0, order = c(1, 1)) +
    scale_fill_manual(values = c(pscat, adjustcolor(pj, alpha.f = 0.55)),
                      guide = FALSE) +
    scale_colour_manual(values = c(pscat, pj), guide = FALSE) +
    thm_Rtft(ticks = FALSE, ytext = FALSE)
j.ps


MAP.j <- MAP[, c("scat", "journal", "cpv", "jrnl")]
pcpv <- mpal(1:2)

# clr.cp <- MAP.j[MAP.j$jrnl %in% j.cp, "jrnl"] %>% unique() %>% length()
# clr.v <- MAP.j[MAP.j$jrnl %in% j.v, "jrnl"] %>% unique() %>% length()
# clr.cpv <- c(rep(pcpv[1], 3), ,  rep(pcpv[2], 2), rep(pcpv[1], 2), rep(pcpv[2], 2))
# clr.cpv1 <- levels(factor(MAP.j$Journal))
# clr.cpv <- ifelse(clr.cpv %in% j.cpp, pcpv[1], pcpv[2])

clr.cpv1 <- levels(factor(MAP.j$journal))
clr.cpv <- ifelse(clr.cpv1 %in% j.cpp, pcpv[1], pcpv[2])

MAP.j$cpv <- ifelse(MAP.j$cpv == "CP", "Community Psychology", "Violence-Specific")
MAP.j$scat <- ifelse(MAP.j$scat == "S3", "IPV Interventions", "SMW-Inclusive Research")

names(MAP.j) <- c("Category", "Journal", "Discipline", "jrnl")

j.ps2 <- ggparset2(list("Category", "Journal", "Discipline"),
                   data = MAP.j,
                   method = "parset", label = TRUE,
                   label.size = 2.75, text.angle = 0, order = c(1, 0, 0)) +
    scale_fill_manual(values = c(pscat, adjustcolor(pcpv, alpha.f = 0.85),
                                 adjustcolor(clr.cpv, alpha.f = 0.55)),
                      guide = FALSE) +
    scale_colour_manual(values = c(pscat, adjustcolor(pcpv, alpha.f = 0.85),
                                   adjustcolor(clr.cpv, alpha.f = 0.85)),
                        guide = FALSE) +
    thm_Rtft(ticks = FALSE, ytext = FALSE); j.ps2
```


\tufteskip

# Publication Years
\Frule


```{r yr_hist, echo=FALSE, fig.fullwidth=TRUE, fig.cap="Publication Years Grouped by Research Category", fig.height = 4}

### PLOT - year/scat ####
s3hist <- hist(MAP$year[MAP$scat == "S3"], plot = FALSE, right = F, breaks = 25)
s4hist <- hist(MAP$year[MAP$scat == "S4"], plot = FALSE, right = F, breaks = s3hist$breaks)
## col = pal_my.a75[12], border = pal_my[19], lwd = .5

plot(s4hist, col = pal_sci[8], border = pal_my[19], density = 50, lwd = .25,
     main = " ", xlab = "Year", ylab = expression(N[Articles]),
     ylim = c(0, max(s3hist$counts))); plot(s3hist, col = pal_my[16], border = pal_my[19], density = 50, angle = -45, lwd = .25, add = TRUE); legend(x = 1990, y = 3.75, legend = c("IPV Research Specifically Inclusive of Sexual Minority Women", "IPV Interventions Research (general)"),
       fill = c(pal_sci[8], pal_my[16]), density = 50, angle = c(45, -45),
       border = NA, bty = 'n', cex = 0.8, text.font = 3,
       trace = F)
```



```{r echo=FALSE}
#### NO MORE ECHO ####
## knitr::opts_chunk$set(echo = FALSE)
```


\newpage

# Research Topics, Sampling Frames, and Methodologies



```{r FUN_Rftm}

### FUN - 'Rftm()' ####

Rftm <- function(x1, x2, dnn = NULL, zero.action = NA, zero.qt = FALSE) {
    if (!is.null(dnn)) {
        tx <- Rtdf(x1, names = dnn[[1]])
        ftm <- ftable(x1, x2, row.vars = 1) %>%
            matrix(nrow = nrow(tx), byrow = FALSE)
        dimnames(ftm) <- list(levels(x1), dnn[[2]])
    } else {
        tx <- Rtdf(x1)
        ftm <- ftable(x1, x2, row.vars = 1) %>%
            matrix(nrow = nrow(tx), byrow = FALSE)
        dimnames(ftm) <- list(levels(x1))
    }
    if (!is.null(zero.action)) {
        if (zero.qt == 0 | zero.qt == 1) {
            zero.qt <- as.logical(zero.qt)
        }
        if (zero.qt == TRUE) {
            ftm <- ifelse(ftm == 0, quote(zero.action), ftm)
        } else {
            ftm <- ifelse(ftm == 0, noquote(zero.action), ftm)
        }
    }
    y <- list(tx, ftm)
    names(y) <- c(paste0("Tabulation of ", deparse(substitute(x1))),
                  paste0("Cross-Tabulation of ",
                         deparse(substitute(x1)),
                         " & ",
                         deparse(substitute(x2))))
    return(y)
}
```


\Frule

## Primary Topics


```{r topics, fig.fullwidth=TRUE, fig.height = 7.5}

## topics ============================================================
# cb$clab <- factor(cb$clab)
codes.tp <- cb[cb$cat == "TOPIC", "clab"] %>% droplevels()
ctp.dnn <- c("Topic", "$N_{Articles}$")
scats.tp <- cb[cb$cat == "TOPIC", "scat"] %>% droplevels()
stp.dnn <- c("IPV Interventions", "SMW-Inclusive Research")
topics <- Rftm(codes.tp, scats.tp, dnn = list(ctp.dnn, stp.dnn))
t.tp <- topics[[1]]
ftm.tp <- topics[[2]]
ftm.tp2 <- Rna(ftm.tp)
sum.tp <- apply(ftm.tp2, 1, sum)
ftm.tpp <- cbind(ftm.tp, "**Total**" = sum.tp)
ftm.tpp %>% pander(justify = c("left", "right", "right", "right"),
                   caption = "Research Topics")

### PLOT - topic - 1 ####
Rdotchart(
    ftm.tp,
    pch = 19,
    gcolor = pal_my[20],
    xlab = expression(N[Articles]),
    cex = 0.7,
    gcex = 0.75,
    gfont = 2,
    pt.cex = 1.125,
    color = c(rep(catpal[1], nrow(ftm.tp)), rep(catpal[2], nrow(ftm.tp))))
    ## xaxt = 'n'
#; axis(1, at = seq(range(ftm.tp, na.rm = TRUE)[1],
                    ## range(ftm.tp, na.rm = TRUE)[2], by = 3))
```


\newpage


```{r topics2, fig.fullwidth=TRUE}
dfm.tp2 <- data.frame(ftm.tp)
names(dfm.tp2) <- c("s3", "s4")
top.s3 <- data.frame(dfm.tp2$s3, row.names = rownames(dfm.tp2))
top.s3 <- na.omit(top.s3)
# top.s3
top.s4 <- data.frame(dfm.tp2$s4, row.names = rownames(dfm.tp2))
top.s4 <- na.omit(top.s4)
# top.s4

tp.s3 <- cb[cb$scat == levels(cb$scat)[1] &
                    cb$cat == "TOPIC", ] %>%
    droplevels()
tp.s4 <- cb[cb$scat == levels(cb$scat)[2] &
                    cb$cat == "TOPIC", ] %>%
    droplevels()
```


\newpage
## Research Designs


```{r designs, fig.fullwidth=TRUE}
## designs ============================================================

ct.d <- cb[cb$cat == "DESIGN", ] %>% droplevels()
t.d <- Rtdf(ct.d$clab)
ct.d$clab <- gsub(" Design", "", ct.d$clab) %>% factor()
ft.d <- ftable(ct.d[, c("clab", "scat")], row.vars = 1)
ftm.d <- matrix(ft.d, nrow = nrow(t.d), byrow = FALSE)
dimnames(ftm.d) <- list(Design = levels(ct.d$clab),
                        Category = c("IPV Interventions",
                                     "SMW-Inclusive Research"))
sum.d <- apply(ftm.d, 1, sum)
ftm.d <- ifelse(ftm.d == 0, NA, ftm.d)
ftm.d <- cbind(ftm.d, "**Total**" = sum.d)
ftm.d %>% pander(justify = c("left", "right", "right", "right"),
                 caption = "Overarching Research Designs")

nlabs <- length(unique(ct.d$clab))
pmo <- mpal(1:length(unique(ct.d$clab)), p = sci)

ct.d <- dplyr::rename(ct.d, "Category" = scat, "Design" = clab)

### PLOT - designs ####

library(ggparallel)
pscat <- c("#a6afbb", pal_my[17])
d.ps <- ggparset2(list("Category", "Design"),
                  data = ct.d,
                  method = "parset", label = TRUE,
                  label.size = 3.5, text.angle = 0, order = c(1, 1)) +
    scale_fill_manual(values = c(pscat, adjustcolor(pmo, alpha.f = 0.55)),
                      guide = FALSE) +
    scale_colour_manual(values = c(pscat, pmo), guide = FALSE) +
    thm_Rtft(ticks = FALSE, ytext = FALSE)
d.ps
```


\newpage
`r tufte::newthought("\\Large{Experimental Research Designs}")`


```{r exp, fig.fullwidth=TRUE}
## experimental designs ============================================================

ct.exp <- cb[cb$cat == "DESIGN-EXP", ] %>% droplevels()
t.exp <- Rtdf(ct.exp$clab)
ct.exp$clab <- gsub(" Design", "", ct.exp$clab) %>% factor()
ct.exp$clab <- gsub(" \\(", " \n\\(", ct.exp$clab) %>% factor()
ft.exp <- ftable(ct.exp[, c("clab", "scat")], row.vars = 1)
ftm.exp <- matrix(ft.exp, nrow = nrow(t.exp), byrow = FALSE)
dimnames(ftm.exp) <- list("Experimental Design" = levels(ct.exp$clab),
                          Category = c("IPV Interventions",
                                       "SMW-Inclusive Research"))
sum.exp <- apply(ftm.exp, 1, sum)
ftm.exp <- ifelse(ftm.exp == 0, NA, ftm.exp)
ftm.exp <- cbind(ftm.exp, "**Total**" = sum.exp)
ftm.exp %>% pander(justify = c("left", "right", "right", "right"),
                   caption = "Experimental Research Designs")

nlabs <- length(unique(ct.exp$clab))
pmo <- mpal(1:length(unique(ct.exp$clab)), p = sci)

ct.exp <- dplyr::rename(ct.exp, "Category" = scat, "Experimental Design" = clab)

### PLOT - experimental designs ####

library(ggparallel)
pscat <- c("#a6afbb", pal_my[17])
exp.ps <- ggparset2(list("Category", "Experimental Design"),
                    data = ct.exp,
                    method = "parset", label = TRUE,
                    label.size = 3, text.angle = 0, order = c(1, 1)) +
    scale_fill_manual(values = c(pscat, adjustcolor(pmo, alpha.f = 0.55)),
                      guide = FALSE) +
    scale_colour_manual(values = c(pscat, pmo), guide = FALSE) +
    thm_Rtft(ticks = FALSE, ytext = FALSE)
exp.ps
```


\newpage
## Data Collection Methodologies


```{r methodologies, fig.fullwidth=TRUE}
## methodologies ============================================================

### PLOT - methodologies - 1 ####

ct.mo <- cb[cb$cat == "METHODS", ] %>% droplevels()
t.mo <- Rtdf(ct.mo$clab)

ft.mo <- ftable(ct.mo[, c("clab", "scat")], row.vars = 1)
ftm.mo <- matrix(ft.mo, nrow = nrow(t.mo), byrow = FALSE)
dimnames(ftm.mo) <- list(Methodology = levels(ct.mo$clab),
                         Category = c("IPV Interventions",
                                      "SMW-Inclusive Research"))
sum.mo <- apply(ftm.mo, 1, sum)
ftm.mo <- ifelse(ftm.mo == 0, NA, ftm.mo)
ftm.mo <- cbind(ftm.mo, "**Total**" = sum.mo)
ftm.mo %>% pander(justify = c("left", "right", "right", "right"),
                  caption = "Methodologies")

### PLOT - methodologies ####

nlabs <- length(unique(ct.mo$clab))
pmo <- mpal(1:length(unique(ct.mo$clab)), p = sci)

ct.mo <- dplyr::rename(ct.mo, "Category" = scat, "Methodology" = clab)

library(ggparallel)
pscat <- c("#a6afbb", pal_my[17])
mo.ps <- ggparset2(list("Category", "Methodology"),
                   data = ct.mo,
                   method = "parset", label = TRUE,
                   label.size = 3.5, text.angle = 0, order = c(1, 1)) +
    scale_fill_manual(values = c(pscat, adjustcolor(pmo, alpha.f = 0.55)),
                      guide = FALSE) +
    scale_colour_manual(values = c(pscat, pmo), guide = FALSE) +
    thm_Rtft(ticks = FALSE, ytext = FALSE)
mo.ps
```


\newpage
`r tufte::newthought("\\large{QuaLitative \\textit{Methods}}")`


```{r qual, fig.fullwidth=TRUE}
## qualitative ============================================================

ct.ql <- cb[cb$cat == "M-QL", ] %>% droplevels()
t.ql <- Rtdf(ct.ql$clab)
ft.ql <- ftable(ct.ql[, c("clab", "scat")], row.vars = 1)
ftm.ql <- matrix(ft.ql, nrow = nrow(t.ql), byrow = FALSE)
dimnames(ftm.ql) <- list("Qua**L**itative Method(s)" = levels(ct.ql$clab),
                         Category = c("IPV Interventions", "SMW-Inclusive Research"))
sum.ql <- apply(ftm.ql, 1, sum)
ftm.ql <- ifelse(ftm.ql == 0, NA, ftm.ql)
ftm.ql <- cbind(ftm.ql, "**Total**" = sum.ql)
ftm.ql %>% pander(justify = c("left", "right", "right", "right"),
                  caption = "Qua**L**itative Method(s)")

### PLOT - qualitative ####
pql <- mpal(1:length(unique(ct.ql$clab)), p = sci)

ct.ql <- dplyr::rename(ct.ql, "QuaLitative Methods" = clab, "Category" = scat)


ql.ps <- ggparset2(list("Category", "QuaLitative Methods"),
                   data = ct.ql,
                   method = "parset", label = TRUE,
                   label.size = 3.5, text.angle = 0, order = c(1, 1)) +
    scale_fill_manual(values = c(pscat, adjustcolor(pql, alpha.f = 0.55)),
                      guide = FALSE) +
    scale_colour_manual(values = c(pscat, pql), guide = FALSE) +
    thm_Rtft(ticks = FALSE, ytext = FALSE)
ql.ps
```


\newpage

`r tufte::newthought("\\Large{QuaNTitative Research \\textit{Designs}}")`


```{r quaNT_designs, fig.fullwidth=TRUE}
ct.dqt <- cb[cb$cat == "D-QT", ] %>% droplevels()
t.dqt <- Rtdf(ct.dqt$clab)
ft.dqt <- ftable(ct.dqt[, c("clab", "scat")], row.vars = 1)
ftm.dqt <- matrix(ft.dqt, nrow = nrow(t.dqt), byrow = FALSE)
dimnames(ftm.dqt) <- list("Qua**NT**itative Design" = levels(ct.dqt$clab),
                          Category = c("IPV Interventions",
                                       "SMW-Inclusive Research"))
# t.dqt
sum.dqt <- apply(ftm.dqt, 1, sum)
ftm.dqt <- ifelse(ftm.dqt == 0, NA, ftm.dqt)
ftm.dqt <- cbind(ftm.dqt, "**Total**" = sum.dqt)
ftm.dqt %>% pander(justify = c("left", "right", "right", "right"),
                   caption = "Qua**NT**itative Designs")

### PLOT - quantitative ####

nlabs <- length(unique(ct.dqt$clab))
pqt <- mpal(1:length(unique(ct.dqt$clab)), p = sci)

ct.dqt <- dplyr::rename(ct.dqt, "QuaNTitative Design" = clab, "Category" = scat)


dqt.ps <- ggparset2(list("Category", "QuaNTitative Design"),
                    data = ct.dqt,
                    method = "parset", label = TRUE,
                    label.size = 3.5, text.angle = 0, order = c(1, 1)) +
    scale_fill_manual(values = c(pscat, adjustcolor(pqt, alpha.f = 0.55)),
                      guide = FALSE) +
    scale_colour_manual(values = c(pscat, pqt), guide = FALSE) +
    thm_Rtft(ticks = FALSE, ytext = FALSE)
dqt.ps
```



\newpage
`r tufte::newthought("\\large{QuaNTitative \\textit{Methods}}")`


```{r quant, fig.fullwidth=TRUE, fig.height=6}
### quantitative ============================================================

ct.qt <- cb[cb$cat == "M-QT", ] %>% droplevels()
t.qt <- Rtdf(ct.qt$clab)
ft.qt <- ftable(ct.qt[, c("clab", "scat")], row.vars = 1)
ftm.qt <- matrix(ft.qt, nrow = nrow(t.qt), byrow = FALSE)
dimnames(ftm.qt) <- list("Qua**NT**itative Method" = levels(ct.qt$clab),
                         Category = c("IPV Interventions",
                                      "SMW-Inclusive Research"))
# t.qt
sum.qt <- apply(ftm.qt, 1, sum)
ftm.qt <- ifelse(ftm.qt == 0, NA, ftm.qt)
ftm.qt <- cbind(ftm.qt, "**Total**" = sum.qt)
ftm.qt %>% pander(justify = c("left", "right", "right", "right"),
                  caption = "Qua**NT**itative Methods")

### PLOT - quantitative ####

nlabs <- length(unique(ct.qt$clab))
pqt <- mpal(1:length(unique(ct.qt$clab)), p = sci)

ct.qt <- dplyr::rename(ct.qt, "QuaNTitative Methods" = clab, "Category" = scat)


qt.ps <- ggparset2(list("Category", "QuaNTitative Methods"),
                   data = ct.qt,
                   method = "parset", label = TRUE,
                   label.size = 3.5, text.angle = 0, order = c(1, 1)) +
    scale_fill_manual(values = c(pscat, adjustcolor(pqt, alpha.f = 0.55)),
                      guide = FALSE) +
    scale_colour_manual(values = c(pscat, pqt), guide = FALSE) +
    thm_Rtft(ticks = FALSE, ytext = FALSE)
qt.ps
```


\newpage
`r tufte::newthought("\\large{Archival/Secondary Data Sources}")`


```{r m_rcrd, fig.fullwidth=TRUE}
### archival/secondary data sources ####
ct.rcrd <- cb[cb$cat == "M-RCRD", ] %>% droplevels()
t.rcrd <- Rtdf(ct.rcrd$clab)
ft.rcrd <- ftable(ct.rcrd[, c("clab", "scat")], row.vars = 1)
ftm.rcrd <- matrix(ft.rcrd, nrow = nrow(t.rcrd), byrow = FALSE)
dimnames(ftm.rcrd) <- list("Archival Data Source" = levels(ct.rcrd$clab),
                           Category = c("IPV Interventions",
                                        "SMW-Inclusive Research"))
# t.rcrd
sum.rcrd <- apply(ftm.rcrd, 1, sum)
ftm.rcrd <- ifelse(ftm.rcrd == 0, NA, ftm.rcrd)
ftm.rcrd <- cbind(ftm.rcrd, "**Total**" = sum.rcrd)
ftm.rcrd %>% pander(justify = c("left", "right", "right", "right"),
                    caption = "Archival Data Sources")

### PLOT - archival/secondary data sources ####

nlabs <- length(unique(ct.rcrd$clab))
prcrd <- mpal(1:length(unique(ct.rcrd$clab)), p = sci)

ct.rcrd <- dplyr::rename(ct.rcrd, "Archival Data Source" = clab, "Category" = scat)


rcrd.ps <- ggparset2(list("Category", "Archival Data Source"),
                     data = ct.rcrd,
                     method = "parset", label = TRUE,
                     label.size = 3.5, text.angle = 0, order = c(1, 1)) +
    scale_fill_manual(values = rev(c(rev(pscat), adjustcolor(prcrd, alpha.f = 0.55))),
                      guide = FALSE) +
    scale_colour_manual(values = rev(c(rev(pscat), prcrd)), guide = FALSE) +
    thm_Rtft(ticks = FALSE, ytext = FALSE)
rcrd.ps
```


\newpage

`r tufte::newthought("\\Large{Mixed-Methodological \\textit{Designs}}")`


```{r mm_designs, fig.fullwidth=TRUE}
## mixed-methods designs ========================================================

ct.dmm <- cb[cb$cat == "D-MM", ] %>% droplevels()
t.dmm <- Rtdf(ct.dmm$clab)
ft.dmm <- ftable(ct.dmm[, c("clab", "scat")], row.vars = 1)
ftm.dmm <- matrix(ft.dmm, nrow = nrow(t.dmm), byrow = FALSE)
dimnames(ftm.dmm) <- list("Mixed-Methodological Design" = levels(ct.dmm$clab),
                          scat = c("IPV Interventions",
                                   "SMW-Inclusive Research"))
# t.dmm
sum.dmm <- apply(ftm.dmm, 1, sum)
ftm.dmm <- ifelse(ftm.dmm == 0, NA, ftm.dmm)
ftm.dmm <- cbind(ftm.dmm, "**Total**" = sum.dmm)
ftm.dmm %>% pander(justify = c("left", "right", "right", "right"),
                   caption = "Mixed-Methodological Designs")

### PLOT - mixed-methods ####

nlabs <- length(unique(ct.dmm$clab))
pmm <- mpal(1:length(unique(ct.dmm$clab)), p = sci)

ct.dmm <- dplyr::rename(ct.dmm, "Mixed-Methodological Design" = clab, "Category" = scat)


dmm.ps <- ggparset2(list("Category", "Mixed-Methodological Design"),
                    data = ct.dmm,
                    method = "parset", label = TRUE,
                    label.size = 3.5, text.angle = 0, order = c(-1,-1)) +
    scale_fill_manual(values = c(pscat, adjustcolor(pmm, alpha.f = 0.55)),
                      guide = FALSE) +
    scale_colour_manual(values = c(pscat, pmm), guide = FALSE) +
    thm_Rtft(ticks = FALSE, ytext = FALSE)
dmm.ps
```

\newpage
`r tufte::newthought("\\large{Mixed (QuaLitative \\& QuaNTitative) \\textit{Methods}}")`


```{r mm_methods, fig.fullwidth=TRUE}
## mixed-methods ============================================================

ct.mm <- cb[cb$cat == "M-MM", ] %>% droplevels()
t.mm <- Rtdf(ct.mm$clab)
ft.mm <- ftable(ct.mm[, c("clab", "scat")], row.vars = 1)
ftm.mm <- matrix(ft.mm, nrow = nrow(t.mm), byrow = FALSE)
dimnames(ftm.mm) <- list("Mixed-Methods" = levels(ct.mm$clab),
                         scat = c("IPV Interventions",
                                  "SMW-Inclusive Research"))
# t.mm
sum.mm <- apply(ftm.mm, 1, sum)
ftm.mm <- ifelse(ftm.mm == 0, NA, ftm.mm)
ftm.mm <- cbind(ftm.mm, "**Total**" = sum.mm)
ftm.mm %>% pander(justify = c("left", "right", "right", "right"),
                  caption = "Research Topics")

### PLOT - mixed-methods ####

nlabs <- length(unique(ct.mm$clab))
pmm <- mpal(1:length(unique(ct.mm$clab)), p = sci)

ct.mm <- dplyr::rename(ct.mm, "Mixed-Methods" = clab, "Category" = scat)


mm.ps <- ggparset2(list("Category", "Mixed-Methods"),
                   data = ct.mm,
                   method = "parset", label = TRUE,
                   label.size = 3.5, text.angle = 0, order = c(-1,-1)) +
    scale_fill_manual(values = c(pscat, adjustcolor(pmm, alpha.f = 0.55)),
                      guide = FALSE) +
    scale_colour_manual(values = c(pscat, pmm), guide = FALSE) +
    thm_Rtft(ticks = FALSE, ytext = FALSE)
mm.ps
```


\newpage
## Target Populations & Sampling Frames


```{r populations, fig.fullwidth=TRUE, fig.height = 7.5}
## populations ============================================================

ct.pop <- cb[cb$cat == "POPULATION", ] %>% droplevels()
t.pop <- Rtdf(ct.pop$clab)
ft.pop <- ftable(ct.pop[, c("clab", "scat")], row.vars = 1)
ftm.pop <- matrix(ft.pop, nrow = nrow(t.pop), byrow = FALSE)
dimnames(ftm.pop) <-
    list(
        "Populations" = levels(ct.pop$clab),
        scat = c("IPV Interventions", "SMW-Inclusive Research")
    )

sum.pop <- apply(ftm.pop, 1, sum)
ftm.pop <- ifelse(ftm.pop == 0, NA, ftm.pop)
ftm.popp <- cbind(ftm.pop, "**Total**" = sum.pop)
ftm.popp %>% pander(justify = c("left", "right", "right", "right"),
                    caption = "Research Topics")

### PLOT - populations - 1 ####

Rdotchart(
    ftm.pop,
    pch = 19,
    gcolor = pal_my[20],
    xlab = expression(N[Articles]),
    cex = 0.7,
    gcex = 0.75,
    gfont = 2,
    pt.cex = 1.125,
    color = c(rep(catpal[1], nrow(ftm.pop)), rep(catpal[2], nrow(ftm.pop))))
```

\newpage

# References
